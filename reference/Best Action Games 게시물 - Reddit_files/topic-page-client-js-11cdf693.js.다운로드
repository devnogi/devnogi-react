import{J as t,t as e,_ as s,g as i,T as o,e as a}from"./shell-47d14d7f.js";import{s as r,x as l,a as c}from"./icon-feb8496e.js";import"./reddit-page-data-301667b2.js";import"./shreddit-tweet-embed-436e895b.js";import"./partial-feed-post-client-js-de70d700.js";import"./faceplate-tabpanel-1da4cb8e.js";import"./shop-gallery-data-fetcher-client-js-fbf7e042.js";import"./faceplate-tablist-fc8d4be9.js";import"./faceplate-tabgroup-85481aa7.js";import"./select-controller-4bbbb950.js";import"./table-pagination-59fbba3e.js";import"./links-d16464b2.js";import"./age-gate-standalone-client-js-2c5a180c.js";import"./mod-log-takedown-preview-client-js-b54691fb.js";import"./faceplate-shimmer-fca6e482.js";import"./index-74484a69.js";import"./content-action-button-9de45e7b.js";import"./award-controller-8d17e8c9.js";import"./awardsTelemetryState-41d14fef.js";import"./awards-24bae1d0.js";import"./awards-dbe4b718.js";import"./header-action-item-chat-client-js-bec5a62d.js";import"./tooltip.base-6bd30da2.js";import"./utils-b9d9442f.js";import"./rpl-coachmark-7839db9c.js";import"./rpl-coachmark-card-97f74d54.js";import"./mod-post-list-client-js-f43c1d63.js";import"./content-tags-94c4765a.js";import"./overflow-menu-actions-b3104045.js";import"./distinguished-tags-fcb25dd7.js";import"./shreddit-post-share-button-8901d24c.js";import"./list-item-header-bb203cd0.js";import"./with-share-ae033e14.js";import"./promote-post-actions-controller-ca61e534.js";import"./index-42ea2902.js";import"./keywords-b9d47d5c.js";import"./postFlair-92a7cf96.js";import"./promote-post-button-2c7abd3e.js";import"./translation-intervention-modal-5de7c927.js";import"./translations-9b835411.js";import"./chat-mobile-xpromo-client-js-b241f012.js";import"./app-selector-client-js-979df606.js";import"./message-composer-utils-be593e8d.js";import"./v2-events-fdc36ae1.js";import"./mod-verdict-2056875f.js";import"./gallery-4e2ce688.js";import"./faceplate-carousel-878a6386.js";import"./index-4a60c0f4.js";import"./password-recovery-5c86a0a1.js";import"./qr-code-modal-upsell-client-js-9c3dc640.js";import"./index-d5ded420.js";import"./number-13714cc0.js";import"./user-flair-602fac54.js";const n={posts:1,communities:2,related_topics:3},p=t(r);let d=class extends p{constructor(){super(),this.selectedTab=null,this.onSeeAllClick=t=>{if(!t.topicNumber||!t.topicName)return void(this.tabs.pageIndex=t.tab);this.tabs.pageIndex=t.tab,this.relatedTopicsSelect.pageIndex=Number(t.topicNumber);const e=this.relatedTopicsDropdown?.children&&Array.from(this.relatedTopicsDropdown.children).find((t=>t.textContent));e&&(e.textContent=t.topicName)},this.handleTabButtonClick=t=>{const e=t?.target,s=e?.closest("button");this.selectedTab=s.slot,this.publish(o.TopicPageTabChanged,this.selectedTab)},this.handleTopicsButtonClick=t=>{this.topicsDropdownMenu?.close();const e=t?.target?.textContent;if(!e||!this.relatedTopicsDropdown)return;const s=Array.from(this.relatedTopicsDropdown.children).find((t=>t.textContent));s&&(s.textContent=e)},this.initialActiveTab=window.location?.hash.substring(1)}get relatedTopicsDropdown(){return this.querySelector(".related-topics-dropdown")}get relatedTopicsButtons(){return this.querySelectorAll(".related-topics-button")}get relatedTopicsSelect(){return document.querySelector("#related-topics-tabgroup")}get topicsDropdownMenu(){return this.querySelector("#topics-dropdown-menu")}get tabButtons(){return this.querySelectorAll("#topic-tabgroup button")}get tabs(){return this.querySelector("#topic-tabgroup")}connectedCallback(){super.connectedCallback(),this.subscribe(o.TopicPageSeeAllClicked,this.onSeeAllClick)}firstUpdated(){this.setInitialPageIndex(),this.relatedTopicsButtons.forEach((t=>{t.addEventListener("click",this.handleTopicsButtonClick)})),this.tabButtons.forEach((t=>{t.addEventListener("click",this.handleTabButtonClick)}))}disconnectedCallback(){super.disconnectedCallback(),this.unsubscribe(o.TopicPageSeeAllClicked,this.onSeeAllClick),this.relatedTopicsButtons.forEach((t=>{t.removeEventListener("click",this.handleTopicsButtonClick)})),this.tabButtons.forEach((t=>{t.removeEventListener("click",this.handleTabButtonClick)}))}setInitialPageIndex(){if(this.tabs&&this.initialActiveTab){const t=n[this.initialActiveTab];if(!t)return;this.tabs.pageIndex=t}}render(){return l` <div> <slot name="tabs" class="block"></slot> <div class="pt-sm pb-lg px-xs"> <slot name="tab-panel"></slot> </div> </div> `}};d.styles=[e],s([i()],d.prototype,"selectedTab",void 0),d=s([a("topic-tabs")],d);const m=t(r);var h;!function(t){t["page-1"]="posts",t["page-2"]="communities",t["page-3"]="relatedTopics"}(h||(h={}));let b=class extends m{constructor(){super(...arguments),this.activeTab="posts",this.onActiveTabChange=t=>{this.activeTab=h[t]},this.handleSeeAll=t=>{const e=t.target,s=e.getAttribute("data-topicname"),i=e.getAttribute("data-topicnumber");this.activeTab=h["page-3"],this.publish(o.TopicPageSeeAllClicked,{tab:3,topicNumber:Number(i),topicName:s})},this.handleSeeAllCommunities=()=>{this.activeTab=h["page-2"],this.publish(o.TopicPageSeeAllClicked,{tab:2})}}get seeAllTopics(){return document.querySelectorAll(".see-all")}get seeAllCommunities(){return document.querySelectorAll(".see-all-communities")}firstUpdated(){const t=new URLSearchParams(location.search).get("activeTab")??"posts";this.activeTab=t,this.seeAllTopics.forEach((t=>{t.addEventListener("click",this.handleSeeAll)})),this.seeAllCommunities.forEach((t=>{t.addEventListener("click",this.handleSeeAllCommunities)}))}connectedCallback(){super.connectedCallback(),this.subscribe(o.TopicPageTabChanged,this.onActiveTabChange)}disconnectedCallback(){this.unsubscribe(o.TopicPageTabChanged,this.onActiveTabChange),this.seeAllTopics.forEach((t=>{t.removeEventListener("click",this.handleSeeAll)})),this.seeAllCommunities.forEach((t=>{t.removeEventListener("click",this.handleSeeAllCommunities)}))}render(){return l`<div> ${"posts"===this.activeTab?l`<slot name="posts"></slot>`:""} ${"communities"===this.activeTab?l`<slot name="communities"></slot>`:""} ${"relatedTopics"===this.activeTab?l`<slot name="relatedTopics"></slot>`:""} </div>`}};b.styles=[e,c`:host{display:block}`],s([i()],b.prototype,"activeTab",void 0),b=s([a("topic-right-rail")],b);
