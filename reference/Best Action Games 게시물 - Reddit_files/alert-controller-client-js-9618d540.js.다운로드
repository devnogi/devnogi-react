import{t as e,_ as t,g as s,C as n,e as a,n as i,u as r,j as o,G as l,b as c,c as d,co as p}from"./shell-47d14d7f.js";import{s as h,x as m,l as u,aI as b,A as v,M as g,a as C,I as f,aJ as w}from"./icon-feb8496e.js";import{aq as k,ar as x}from"./age-gate-standalone-client-js-2c5a180c.js";import{r as y,F as _}from"./render-toast-8a7f5e9e.js";import"./banned-user-banner-client-js-fcd634e6.js";import{T}from"./message-composer-utils-be593e8d.js";let E=class extends h{constructor(){super(...arguments),this.isVisible=!1,this.alertMessage="",this.isDevelopment=!1,this.appearance="plain",this.openBanner=e=>{const t=e;this.alert=t.detail;const{level:s=n.none}=this.alert,a="서버 오류입니다. 나중에 다시 시도하세요.",i=this.alert?.content??this.alert?.message??a;switch(s){case n.emergency:case n.alert:case n.critical:case n.error:this.appearance="error";break;case n.warning:case n.notice:this.appearance="caution";break;case n.success:this.appearance="success";break;default:this.appearance="plain"}const r=`'${i}' 외 다수의 오류 발생`;s<=n.success||this.isDevelopment?this.isVisible?this.alertMessage=this.isDevelopment?r:a:(this.alertMessage=i,this.isVisible=!0):this.isVisible=!1},this.closeBanner=()=>{this.isVisible=!1}}connectedCallback(){super.connectedCallback(),this.addEventListener("show-banner",this.openBanner)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("show-banner",this.openBanner)}render(){return m`${this.isVisible?m`<faceplate-banner class="z-5 pointer-events-auto w-full rounded-none l:rounded-[0.75rem] xl:rounded-[0.75rem] overflow-hidden l:mt-md l:mx-auto l:max-w-[1352px] xl:max-w-[1524px]" appearance="${this.appearance}" shape="square" msg="${u(this.alertMessage)}" aria-live="polite" dismissible><div slot="leadingIcon"> ${this.alert?.namedContent?.icon?this.alert.namedContent.icon:b()} </div> <span slot="closeButton"> ${k("error",{"aria-label":"close error button",onclick:this.closeBanner})} </span> </faceplate-banner>`:v}<slot></slot>`}};E.styles=[e],t([s()],E.prototype,"isVisible",void 0),t([s()],E.prototype,"alertMessage",void 0),E=t([a("banner-controller")],E);let B=class extends h{constructor(){super(...arguments),this.ariaLive="polite",this._gesture=new T(this,{mouseSupport:!0}),this.handleToast=e=>{const t=e.detail,s={...t,meta:{...t.meta},namedContent:{...t.namedContent}},{level:a,namedContent:i,meta:o}=s;i.action??(i.action=r({attributes:{onclick:()=>l.dismiss()},appearance:"plainInverted",leadingIcon:g()}));const l=y(this,s);a&&a>=n.warning&&a<=n.success&&!o?.disableAutoDismiss&&window.setTimeout((()=>{l.dismiss()}),o?.duration??4e3),this.appendChild(l)}}static get styles(){return C`:host{position:fixed}:host>slot{display:flex;flex-direction:column;gap:var(--spacer-md);align-items:center;position:fixed;left:50%;transform:translateX(-50%);padding:0 1rem;bottom:var(--rem16)}`}connectedCallback(){super.connectedCallback(),this.addEventListener("show-toast",this.handleToast),this._gesture.on("swipeleft",this._onSwipe),this._gesture.on("swiperight",this._onSwipe)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("show-toast",this.handleToast),this._gesture.destroy()}_onSwipe(e){if(e instanceof MouseEvent)return;const t=e.target instanceof HTMLElement?e.target:null,s=t?.closest("faceplate-toast");s instanceof _&&s.dismiss()}render(){return m`<slot></slot>`}};t([i({type:String,reflect:!0,attribute:"aria-live"})],B.prototype,"ariaLive",void 0),B=t([a("toaster-lite")],B);const L=o(h);let I=class extends L{constructor(){super(...arguments),this.ariaLive="polite",this.min=n.error,this.max=n.success,this.BATCH_TIMEOUT=100,this._alertsCtrl=new x(this,{batchWindow:this.BATCH_TIMEOUT,onAlert:e=>{const{level:t=n.none}=e;if(e.namedContent=e.namedContent||{},!e.namedContent.icon)switch(t){case n.emergency:case n.alert:case n.critical:case n.error:e.namedContent.icon=w({size:f.Large});break;case n.warning:case n.notice:e.namedContent.icon=b({size:f.Large})}if("string"==typeof e.namedContent.actionTemplateId){const t=document.querySelector(e.namedContent.actionTemplateId);t&&(e.namedContent.action=t.content.cloneNode(!0))}if(t<=n.error)return this._trackEvent(e,"banner"),this.triggerBanner(e);this._trackEvent(e,"toast"),this.triggerToast(e)},isOnline:()=>!0}),this._trackEvent=(e,t)=>{this.trackEvent(c({source:"client",action:"record",noun:"alert"},{action_info:{feature:e.sourceElement||"unknown",reason:e.cause||e.message||"unknown",setting_value:`${e.level??"unknown"}`,type:t}}))},this.triggerToast=e=>{this.toaster?.dispatchEvent(d("show-toast",e))},this.triggerBanner=e=>{this.bannerController?.dispatchEvent(d("show-banner",e))}}connectedCallback(){super.connectedCallback(),this._alertsCtrl.options.min=this.min,this._alertsCtrl.options.max=this.max}render(){return m` <banner-controller></banner-controller> <toaster-lite></toaster-lite> `}};I.styles=[C`:host{position:fixed;width:100%}`,e],t([i({type:String,reflect:!0,attribute:"aria-live"})],I.prototype,"ariaLive",void 0),t([i({attribute:"min",converter:p})],I.prototype,"min",void 0),t([i({attribute:"max",converter:p})],I.prototype,"max",void 0),t([l("banner-controller")],I.prototype,"bannerController",void 0),t([l("toaster-lite")],I.prototype,"toaster",void 0),I=t([a("alert-controller")],I);
