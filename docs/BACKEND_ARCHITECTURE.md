# ë°±ì—”ë“œ ì•„í‚¤í…ì²˜

## ğŸ“ ì „ì²´ êµ¬ì¡°

DevNogi í”„ë¡ íŠ¸ì—”ë“œëŠ” **ê²Œì´íŠ¸ì›¨ì´ ì„œë²„**ë¥¼ í†µí•´ ë‘ ê°œì˜ ë°±ì—”ë“œ ì„œë¹„ìŠ¤ì™€ í†µì‹ í•©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        DevNogi Frontend                         â”‚
â”‚                      (Next.js 15 App Router)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ ê±°ë˜ ë‚´ì—­ ë·°  â”‚  â”‚  ê²½ë§¤ì¥ ë·°   â”‚  â”‚ ì»¤ë®¤ë‹ˆí‹° ë·°  â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚         â”‚                  â”‚                  â”‚                  â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                            â”‚                                     â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚                    â”‚  Next.js BFF   â”‚                           â”‚
â”‚                    â”‚   API Routes   â”‚                           â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€-â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Gateway Server  â”‚
                    â”‚ 168.107.43.221   â”‚
                    â”‚     :8080        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                         â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ OPEN API BATCH   â”‚     â”‚  ì»¤ë®¤ë‹ˆí‹° ì„œë²„    â”‚
       â”‚     ì„œë²„         â”‚     â”‚                  â”‚
       â”‚ 138.2.126.248    â”‚     â”‚   3.39.119.27    â”‚
       â”‚     :8080        â”‚     â”‚                  â”‚
       â”‚                  â”‚     â”‚                  â”‚
       â”‚  Prefix: /oab    â”‚     â”‚  Prefix: /dcs    â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                          â”‚
              â”‚                          â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
       â”‚   ê²½ë§¤ì¥     â”‚           â”‚  ê²Œì‹œíŒ     â”‚
       â”‚   ê±°ë˜ ë‚´ì—­  â”‚           â”‚  ê²Œì‹œê¸€     â”‚
       â”‚   ì•„ì´í…œ     â”‚           â”‚  ëŒ“ê¸€       â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸŒ ì„œë²„ ì •ë³´

### 1. ê²Œì´íŠ¸ì›¨ì´ ì„œë²„ (Gateway)
- **URL**: http://168.107.43.221:8080/
- **ì—­í• **: ëª¨ë“  API ìš”ì²­ì˜ ì§„ì…ì , prefix ê¸°ë°˜ ë¼ìš°íŒ…
- **ê¸°ëŠ¥**:
  - `/oab/*` ìš”ì²­ â†’ OPEN API BATCH ì„œë²„ë¡œ ì „ë‹¬
  - `/dcs/*` ìš”ì²­ â†’ ì»¤ë®¤ë‹ˆí‹° ì„œë²„ë¡œ ì „ë‹¬

### 2. OPEN API BATCH ì„œë²„
- **URL**: http://138.2.126.248:8080
- **Swagger**: http://138.2.126.248:8080/swagger-ui/index.html
- **Prefix**: `/oab`
- **ë‹´ë‹¹ í™”ë©´**:
  - ê²½ë§¤ì¥ ë·° (`/auction`)
  - ê±°ë˜ ë‚´ì—­ ë·° (`/auction-history`)
- **ì£¼ìš” ê¸°ëŠ¥**:
  - ê²½ë§¤ ì•„ì´í…œ ì¡°íšŒ
  - ê±°ë˜ ë‚´ì—­ ì¡°íšŒ
  - ê°€ê²© ì •ë³´

### 3. ì»¤ë®¤ë‹ˆí‹° ì„œë²„ (DCS - DevNogi Community Service)
- **URL**: http://3.39.119.27
- **Swagger**: http://3.39.119.27/swagger-ui/index.html
- **Prefix**: `/dcs`
- **ë‹´ë‹¹ í™”ë©´**:
  - ì»¤ë®¤ë‹ˆí‹° ë·° (`/community`)
- **ì£¼ìš” ê¸°ëŠ¥**:
  - ê²Œì‹œíŒ ê´€ë¦¬
  - ê²Œì‹œê¸€ CRUD
  - ëŒ“ê¸€ ì‹œìŠ¤í…œ
  - ì¢‹ì•„ìš” ê¸°ëŠ¥

## ğŸ”„ API ë¼ìš°íŒ… íë¦„

### ê²½ë§¤ì¥ API (OPEN API BATCH)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Client    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ GET /api/auction-history
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Next.js API Route               â”‚
â”‚ src/app/api/auction-history/    â”‚
â”‚         route.ts                â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ createServerAxios()
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Gateway Server                  â”‚
â”‚ http://168.107.43.221:8080/     â”‚
â”‚         oab/auction-history     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ Prefix: /oab
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ OPEN API BATCH ì„œë²„              â”‚
â”‚ http://138.2.126.248:8080       â”‚
â”‚         /auction-history        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
   [Response]
```

### ì»¤ë®¤ë‹ˆí‹° API (DCS)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Client    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ GET /api/posts
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Next.js API Route               â”‚
â”‚ src/app/api/posts/route.ts      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ createServerAxios()
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Gateway Server                  â”‚
â”‚ http://168.107.43.221:8080/     â”‚
â”‚         dcs/posts               â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ Prefix: /dcs
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì»¤ë®¤ë‹ˆí‹° ì„œë²„ (DCS)               â”‚
â”‚ http://3.39.119.27              â”‚
â”‚         /posts                  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
   [Response]
```

## ğŸ“‹ í™”ë©´ë³„ API ë§¤í•‘

| í™”ë©´ | ê²½ë¡œ | ë°±ì—”ë“œ ì„œë²„ | Prefix | ì£¼ìš” API |
|------|------|------------|--------|---------|
| ê±°ë˜ ë‚´ì—­ | `/auction-history` | OPEN API BATCH | `/oab` | `/oab/auction-history` |
| ê²½ë§¤ì¥ | `/auction` | OPEN API BATCH | `/oab` | `/oab/auction` |
| ì»¤ë®¤ë‹ˆí‹° | `/community` | ì»¤ë®¤ë‹ˆí‹° ì„œë²„ | `/dcs` | `/dcs/boards`, `/dcs/posts` |

## ğŸ” ì¸ì¦ íë¦„

í˜„ì¬ êµ¬í˜„ëœ ì¸ì¦ ë°©ì‹:

```
Client Request
    â†“ (with Authorization header)
Next.js API Route
    â†“ (forwards headers)
Gateway Server
    â†“ (validates token)
Backend Service
```

**í—¤ë” ì „ë‹¬:**
- `Authorization`: JWT í† í° (ë¡œê·¸ì¸ ì‹œ ë°œê¸‰)
- `Cookie`: ì„¸ì…˜ ì¿ í‚¤

**êµ¬í˜„ ìœ„ì¹˜:**
- `src/lib/api/server.ts` - `createServerAxios()` í•¨ìˆ˜ì—ì„œ í—¤ë” ì „ë‹¬

## ğŸ“ API ì—”ë“œí¬ì¸íŠ¸ ìƒìˆ˜

ëª¨ë“  API ì—”ë“œí¬ì¸íŠ¸ëŠ” `src/lib/api/constants.ts`ì— ì •ì˜ë˜ì–´ ìˆìŠµë‹ˆë‹¤:

```typescript
// Gateway Server: http://168.107.43.221:8080/

// Auction API Endpoints (prefix: /oab)
export const AUCTION_HISTORY_ENDPOINT = "/oab/auction-history";

// Community API Endpoints (prefix: /dcs)
export const BOARDS_ENDPOINT = "/dcs/boards";
export const POSTS_ENDPOINT = "/dcs/posts";
export const COMMENTS_ENDPOINT = "/dcs/comments";
```

## ğŸš€ í™˜ê²½ ë³€ìˆ˜

**.env íŒŒì¼ ì„¤ì •:**

```env
# Gateway URL (ê¸°ë³¸ê°’)
GATEWAY_BASE_URL=http://168.107.43.221:8080

# MSW ëª¨í‚¹ í™œì„±í™” ì—¬ë¶€
API_MOCKING=enabled  # development/preview only
```

## ğŸ§ª í…ŒìŠ¤íŠ¸ í™˜ê²½

MSW(Mock Service Worker)ë¥¼ ì‚¬ìš©í•˜ì—¬ API ëª¨í‚¹:

```typescript
// src/mocks/server.ts
const BASE_URL = `${process.env.GATEWAY_BASE_URL}`;

export const handlers = [
  http.get(`${BASE_URL}/oab/auction-history`, () => {
    return HttpResponse.json(mockData);
  }),
  http.get(`${BASE_URL}/dcs/posts`, () => {
    return HttpResponse.json(mockPosts);
  }),
];
```

**í™œì„±í™” ì¡°ê±´:**
- `VERCEL_ENV=development` ë˜ëŠ” `preview`
- `API_MOCKING=enabled`

## ğŸ“Š ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­

### ìºì‹± ì „ëµ

ê° API ë¼ìš°íŠ¸ëŠ” `revalidate` ì„¤ì •ìœ¼ë¡œ ìºì‹± ê¸°ê°„ ì§€ì •:

```typescript
// ê²½ë§¤ ë‚´ì—­: 30ë¶„
export const revalidate = 1800;

// ê²Œì‹œíŒ: 1ì‹œê°„
export const revalidate = 3600;

// ê²Œì‹œê¸€: 5ë¶„
export const revalidate = 300;

// ëŒ“ê¸€: 1ë¶„
export const revalidate = 60;
```

### TanStack Query ì„¤ì •

```typescript
// src/lib/api/clients.ts
export const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      staleTime: 200,
      refetchOnWindowFocus: false,
      refetchOnReconnect: false,
      refetchOnMount: false,
    },
  },
});
```

## ğŸ” ë””ë²„ê¹…

### API ìš”ì²­ ì¶”ì 

1. **í´ë¼ì´ì–¸íŠ¸ ì¸¡**: ë¸Œë¼ìš°ì € Network íƒ­ì—ì„œ `/api/*` í™•ì¸
2. **ì„œë²„ ì¸¡**: Next.js API ë¼ìš°íŠ¸ ë¡œê·¸ í™•ì¸
3. **ê²Œì´íŠ¸ì›¨ì´**: Gateway ì„œë²„ ë¡œê·¸ (í•„ìš”ì‹œ)
4. **ë°±ì—”ë“œ**: Swagger UIë¡œ ì§ì ‘ í…ŒìŠ¤íŠ¸

### Swagger UI ì ‘ê·¼

- **OPEN API BATCH**: http://138.2.126.248:8080/swagger-ui/index.html
- **ì»¤ë®¤ë‹ˆí‹° ì„œë²„**: http://3.39.119.27/swagger-ui/index.html

## ğŸ“š ì°¸ê³  ë¬¸ì„œ

- [CLAUDE.md](../CLAUDE.md) - ì „ì²´ í”„ë¡œì íŠ¸ ê°€ì´ë“œ
- [COMMUNITY_SPECIFICATION.md](./COMMUNITY_SPECIFICATION.md) - ì»¤ë®¤ë‹ˆí‹° ê¸°ëŠ¥ ëª…ì„¸
- [IMPLEMENTATION_SUMMARY.md](./IMPLEMENTATION_SUMMARY.md) - êµ¬í˜„ ìš”ì•½
